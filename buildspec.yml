version: 0.2
phases:
  pre_build:
    commands:
      - yarn
      - npm install --save-dev jest
      - npm install --save-dev babel-jest regenerator-runtime
      - yarn test
  build:
   commands:
      - yarn build
  post_build:
    commands:
      - aws s3 sync dist/react-todo-app/ s3://mspr3-la-revanche/

reports:
    jest_reports:
        files:
            - junit.xml
        file-format: JUNITXML
        base-directory: .test

artifacts:
  files:
    - '**/*'
  discard-paths: no
  base-directory: build


